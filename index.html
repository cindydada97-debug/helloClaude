<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="HappyPuppy.ai - ä¸ªäººå·¥å…·ç«™ï¼Œæä¾›ç¼–ç¨‹ã€æ•ˆç‡ã€å›¾åƒã€åŠå…¬ã€æ¸¸æˆç­‰å¤šç§å®ç”¨å·¥å…·">
    <meta name="keywords" content="å·¥å…·ç«™,åœ¨çº¿å·¥å…·,ç¼–ç¨‹å·¥å…·,æ•ˆç‡å·¥å…·,å›¾åƒå·¥å…·">
    <meta name="author" content="HappyPuppy.ai Team">

    <title>HappyPuppy.ai - ä¸ªäººå·¥å…·ç«™</title>

    <!-- Favicon (å¾…æ›¿æ¢) -->
    <link rel="icon" href="./assets/logo/favicon.ico">

    <!-- å¤–éƒ¨CDNé¢„è¿æ¥ -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-primary': '#0A0A0F',
                        'dark-secondary': '#131318',
                    },
                    fontFamily: {
                        'sans': ['Noto Sans SC', 'Inter', 'system-ui'],
                    },
                    screens: {
                        '2xl': '1920px',
                        '3xl': '2560px',
                    }
                }
            }
        }
    </script>

    <!-- æ¨¡å—æ ·å¼ - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ -->
    <link rel="stylesheet" href="./modules/navigation/navigation.css">
    <link rel="stylesheet" href="./modules/hero/hero.css">
    <link rel="stylesheet" href="./modules/tool-card/tool-card.css">
    <link rel="stylesheet" href="./modules/search-results/search-results.css">
    <link rel="stylesheet" href="./modules/footer/footer.css">

    <!-- å…¨å±€æ ·å¼ -->
    <style>
        * {
            font-family: 'Noto Sans SC', 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0A0A0F 0%, #131318 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            color: #FFFFFF;
        }

        /* å¹³æ»‘æ»šåŠ¨ */
        html {
            scroll-behavior: smooth;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* åŠ è½½åŠ¨ç”» */
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0A0A0F;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .app-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #3B82F6;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
    </style>
</head>
<body>
    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="app-loading" id="app-loading">
        <div class="spinner"></div>
        <p class="loading-text">Loading modules...</p>
    </div>

    <!-- å¯¼èˆªæ å®¹å™¨ -->
    <div id="navigation-container"></div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main>
        <!-- è‹±é›„åŒºå®¹å™¨ -->
        <div id="hero-container"></div>

        <!-- æœç´¢ç»“æœå®¹å™¨ -->
        <div id="search-results-container"></div>
    </main>

    <!-- é¡µè„šå®¹å™¨ -->
    <div id="footer-container"></div>

    <!-- å·¥å…·å¡ç‰‡æ¨¡æ¿å®¹å™¨ -->
    <div id="tool-card-template-container"></div>

    <!-- å…¨å±€è„šæœ¬ - æŒ‰é¡ºåºåŠ è½½ -->
    <script src="./scripts/config.js"></script>
    <script src="./scripts/utils.js"></script>
    <script src="./scripts/template-loader.js"></script>

    <!-- åˆå§‹åŒ–è„šæœ¬ -->
    <script>
        /**
         * æ¨¡æ¿åŠ è½½å™¨ - å†…è”ç‰ˆæœ¬ï¼ˆç¡®ä¿å®šä¹‰ï¼‰
         */
        class TemplateLoader {
            constructor() {
                this.templates = new Map();
                this.loadedCount = 0;
                this.totalCount = 0;
            }

            async loadTemplate(url, containerId) {
                try {
                    console.log(`Loading template: ${url}`);
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Failed to load ${url}: ${response.status}`);
                    }

                    const html = await response.text();
                    const container = document.getElementById(containerId);

                    if (!container) {
                        throw new Error(`Container #${containerId} not found`);
                    }

                    container.innerHTML = html;
                    this.templates.set(containerId, html);
                    this.loadedCount++;

                    console.log(`âœ“ Loaded: ${url}`);
                    return true;
                } catch (error) {
                    console.error(`âœ— Error loading template from ${url}:`, error);
                    return false;
                }
            }

            async loadTemplates(templateConfigs) {
                this.totalCount = templateConfigs.length;
                this.loadedCount = 0;

                const promises = templateConfigs.map(config =>
                    this.loadTemplate(config.url, config.containerId)
                );

                return Promise.all(promises);
            }

            getProgress() {
                return {
                    loaded: this.loadedCount,
                    total: this.totalCount,
                    percentage: this.totalCount > 0 ? (this.loadedCount / this.totalCount) * 100 : 0
                };
            }
        }

        /**
         * åº”ç”¨åˆå§‹åŒ–
         */
        (async function initApp() {
            try {
                console.log('ğŸš€ Starting HappyPuppy.ai initialization...');

                // 1. åˆ›å»ºæ¨¡æ¿åŠ è½½å™¨
                const loader = new TemplateLoader();

                // 2. å®šä¹‰æ¨¡æ¿é…ç½® - ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                const templates = [
                    {
                        url: './modules/navigation/navigation.html',
                        containerId: 'navigation-container'
                    },
                    {
                        url: './modules/hero/hero.html',
                        containerId: 'hero-container'
                    },
                    {
                        url: './modules/search-results/search-results.html',
                        containerId: 'search-results-container'
                    },
                    {
                        url: './modules/footer/footer.html',
                        containerId: 'footer-container'
                    },
                    {
                        url: './modules/tool-card/tool-card.html',
                        containerId: 'tool-card-template-container'
                    }
                ];

                // 3. åŠ è½½æ‰€æœ‰æ¨¡æ¿
                console.log('ğŸ“„ Loading templates...');
                const results = await loader.loadTemplates(templates);

                const allLoaded = results.every(result => result === true);
                if (!allLoaded) {
                    console.warn('âš ï¸  Some templates failed to load');
                    const failed = results.reduce((acc, result, index) => {
                        if (!result) acc.push(templates[index].url);
                        return acc;
                    }, []);
                    console.error('Failed templates:', failed);
                }

                console.log('âœ“ Templates loaded successfully');

                // 4. åŠ¨æ€åŠ è½½æ¨¡å—è„šæœ¬
                console.log('ğŸ“¦ Loading module scripts...');
                await loadModuleScripts();

                console.log('âœ“ Module scripts loaded');

                // 5. ç­‰å¾…ä¸€å°æ®µæ—¶é—´ç¡®ä¿æ‰€æœ‰æ¨¡å—åˆå§‹åŒ–
                await new Promise(resolve => setTimeout(resolve, 200));

                // 6. éšè—åŠ è½½åŠ¨ç”»
                hideLoading();

                console.log('âœ… HappyPuppy.ai initialized successfully!');

            } catch (error) {
                console.error('âŒ Failed to initialize app:', error);
                hideLoading();
                showError('åº”ç”¨åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            }
        })();

        /**
         * åŠ¨æ€åŠ è½½æ¨¡å—è„šæœ¬
         */
        async function loadModuleScripts() {
            const scripts = [
                './modules/navigation/navigation.js',
                './modules/hero/hero.js',
                './modules/tool-card/tool-card.js',
                './modules/search-results/search-results.js',
                './modules/footer/footer.js',
                './scripts/main.js'
            ];

            // æŒ‰é¡ºåºåŠ è½½è„šæœ¬
            for (const src of scripts) {
                try {
                    await loadScript(src);
                } catch (error) {
                    console.error(`Failed to load script: ${src}`, error);
                    // ç»§ç»­åŠ è½½å…¶ä»–è„šæœ¬
                }
            }
        }

        /**
         * åŠ è½½å•ä¸ªè„šæœ¬
         */
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    console.log(`  âœ“ Loaded: ${src}`);
                    resolve();
                };
                script.onerror = () => {
                    console.error(`  âœ— Failed to load: ${src}`);
                    reject(new Error(`Failed to load script: ${src}`));
                };
                document.body.appendChild(script);
            });
        }

        /**
         * éšè—åŠ è½½åŠ¨ç”»
         */
        function hideLoading() {
            const loading = document.getElementById('app-loading');
            if (loading) {
                loading.classList.add('hidden');
                setTimeout(() => {
                    loading.remove();
                }, 300);
            }
        }

        /**
         * æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
         */
        function showError(message) {
            const loading = document.getElementById('app-loading');
            if (loading) {
                loading.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fa-solid fa-exclamation-triangle" style="font-size: 3rem; color: #EF4444; margin-bottom: 1rem;"></i>
                        <p style="color: #FFFFFF; font-size: 1.125rem; margin-bottom: 0.5rem; font-weight: 700;">${message}</p>
                        <p style="color: rgba(255,255,255,0.6); font-size: 0.875rem; margin-bottom: 1.5rem;">è¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯</p>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                            <i class="fa-solid fa-rotate-right" style="margin-right: 0.5rem;"></i>
                            åˆ·æ–°é¡µé¢
                        </button>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
